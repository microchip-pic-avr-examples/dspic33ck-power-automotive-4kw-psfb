<!-- HTML header for doxygen 1.8.20-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>4kW dsPIC33C PSFB DC-DC DA: 4kW dsPIC33C PSFB DC-DC DA</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mchp.css" rel="stylesheet" type="text/css"/>
<link href="mchp_theme.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0" style="border:0px; border-spacing: 0px; border-collapse: collapse; vertical-align: middle; width: 100%;">
    <tbody>
        <tr style="border: none; background-color: #00000000;">
            <!--SITE HEADER-->
            <td style="width: 120px; border: none;">
                <img alt="Bar" height="60px" src="images/mchp-brandingelement-rgb2.png"/>
            </td>
            <td style="width: 220px; border: none;">
                <img alt="Logo" height=50px src="images/microchip.png"/>
            </td>
            <td colspan="4" style="font-size: 16pt; font-weight: bolder;">
                4kW dsPIC33C PSFB DC-DC DA (Part-No. ) 
            </td>
            <td style="text-align: right; vertical-align: middle;">
                        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect" class="search-icon" onmouseover="return searchBox.OnSearchSelectShow()" onmouseout="return searchBox.OnSearchSelectHide()"><span class="search-icon-dropdown"></span></span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><div id="MSearchCloseImg" class="close-icon"></div></a>
          </span>
        </div>
            </td>
            <!--END SITE HEADER-->
        </tr>
        <tr style="height:36px; border:none; background-color: #000000b0;">
            <td style="width: 70px; color: white; font-size:14px; font-weight: bolder; margin-left: 30px;">
                <div style="margin-left: 30px;">Content</div>
            </td>
            <td style="width: 10px; color: white; font-size:14px; font-weight: bolder;">
                &nbsp;
            </td>
            <td style="width: 100px; color: white; font-size:14px; font-weight: bolder;">
                <!-- Overview -->
            </td>
            <td style="width: 130px; color: white; font-size:14px; font-weight: bolder;"> 
                <!-- Documentation -->
            </td>
            <td style="width: 170px; color: white; font-size:14px; font-weight: bolder;"> 
                <!-- Additional Resources -->
            </td>
            <td style="width: auto; color: white; font-size:14px; font-weight: bolder;"> 
              &nbsp;
            </td>
            <td style="width: 310px; margin-right: 30px; color: white; font-size:10px; font-weight: lighter; text-align: right;">
                &nbsp;
            </td>
        </tr>
    </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('index.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">4kW dsPIC33C PSFB DC-DC DA </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md__r_e_a_d_m_e"></a> <img src="microchip.png" alt="" class="inline" title="image"/>    </p>
<hr  />
 <h1 class="doxsection"><a class="anchor" id="autotoc_md1"></a>
4kW dsPIC33C PSFB DC-DC Demonstration Application</h1>
<center> </center><center> <img src="images/DCDC1.png" alt="dsPIC33C PSFB DC-DC DA" width="1280" class="inline"/>  </center> <center>  dsPIC33C PSFB DC-DC DA  </center> <hr  />
<h2 class="doxsection"><a class="anchor" id="autotoc_md3"></a>
Summary</h2>
<p>The dsPIC33C Phase Shifted Full Bridge Demonstration Application (PSFB DA) is a development platform designed for quick prototyping and software development, utilizing the Microchip dsPIC33C DSP MCU and Silicon Carbide (SiC FET) Technology. This board is primarily aimed at 800V to 12V automotive OBC DCDC converter applications but is also suitable for other industrial or telecom applications requiring high voltage on the primary side and high current on the secondary side.</p>
<p>The board features well-organized circuit sections, including an input EMI filter and protection, SiC primary PSFB, auxiliary power supply, CAN communication, and a socket for Microchip’s latest Digital Power Plug-In Modules (DP PIMs). The pinout is compatible with CK, CH, and the new AK dsPIC® DSC DP PIMs.</p>
<hr  />
<h2 class="doxsection"><a class="anchor" id="autotoc_md5"></a>
Related Documentation</h2>
<p><b>Firmware Documentation</b></p>
<ul>
<li><a href="https://microchip-pic-avr-examples.github.io/dspic33ck-power-automotive-4kw-psfb/">Online Firmware Documentation of this Code Example</a></li>
</ul>
<p><b>Hardware Documentation</b></p>
<ul>
<li>4kW dsPIC33C PSFB DC-DC application demonstration user's Guide</li>
<li>4kW dsPIC33C PSFB DC-DC application demonstration operational manual</li>
</ul>
<p><b>Target Device Documentation</b></p>
<ul>
<li><a href="https://www.microchip.com/70005349">dsPIC33CK256MP508 Family Data Sheet</a></li>
<li><a href="https://www.microchip.com/80000796">dsPIC33CK256MP508 Family Silicon Errata and Data Sheet Clarification</a></li>
</ul>
<p><b>Please always check for the latest data sheets on the respective product websites:</b></p>
<ul>
<li><a href="https://www.microchip.com/dsPIC33CK256MP508">dsPIC33CK256MP508 Family</a></li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md6"></a>
Software Used</h2>
<ul>
<li><a href="https://www.microchip.com/en-us/software-library/power_board_visualizer">Power Board Visualizer GUI</a></li>
<li><a href="https://www.microchip.com/en-us/tools-resources/develop/mplab-x-ide">MPLAB&reg; X IDE v6.20</a></li>
<li><a href="https://www.microchip.com/en-us/tools-resources/develop/mplab-xc-compilers/xc-dsc">MPLAB&reg; XC-DSC Compiler v3.10</a></li>
<li><a href="https://www.microchip.com/mplab/mplab-code-configurator">Microchip Code Configurator v5.5.1</a></li>
<li><a href="https://www.microchip.com/developmenttools/ProductDetails/DCDT">Digital Compensator Design Tool</a></li>
</ul>
<hr  />
<h2 class="doxsection"><a class="anchor" id="autotoc_md8"></a>
Quick Start Guide</h2>
<p>This section is designed to assist users in powering up the board using the Power Board Visualizer after completing the hardware connections. It does not cover the hardware connection process itself, nor does it address droop or parallel operation. Please ensure that the load and source connections are correct and that the operation is free from hazards. For detailed information, please refer to the user guide. For droop applications, please refer to the parallel operation section in the firmware documentation.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md9"></a>
Directory Structure</h2>
<div class="fragment"><div class="line">├───psfb_droop.X                                    PSFB project for parallel operation</div>
<div class="line">├───psfb_single.X                                   PSFB project for standalone operation</div>
<div class="line">├───images                                          Images for the Readme </div>
<div class="line">├───power_board_visualizer_xmls                     Power Board Visualizer Projects</div>
<div class="line">├───pre_compiled_hex_files                          Pre compiled Hex file</div>
<div class="line">└───docs                                            doxygen files</div>
</div><!-- fragment --> <hr  />
<h2 class="doxsection"><a class="anchor" id="autotoc_md11"></a>
Programming Hex File on to the dsPIC33C Digital Power PIM using available hex file</h2>
<p>In this example ICD4 is being used, but any of the available debuggers/programmers can be used. Hex file for standalone operation is provided in this code example. For Parallel/droop application please refer to the firmware documentation.</p>
<ol type="1">
<li>Open <em>MPLAB X IPE</em></li>
<li>Select the device on DP-PIM : <em>dsPIC33CK256MP506</em></li>
<li>Connect computer to ICD4 via USB cable, connect ICD4 to 6 pin header on DP-PIM via RJ11 cable and RJ11 to ICSP adapter.</li>
<li>Power the dpPIM through a microUSB cable.</li>
<li>Click <em>Connect</em> on the MPLAB X IPE</li>
<li>Wait for the device to connect</li>
<li>Navigate to the folder pre_compiled_hex_files, and select the correct hex file</li>
<li>Click <em>Program</em></li>
<li>Wait for the program/verify complete message.</li>
<li>Disconnect programmer from Digital Power Plug-in Module.</li>
</ol>
<h3>Power Board Visualizer Hardware Setup</h3>
<p>To establish CAN communication between the PC and the PSFB board, a USB to CAN dongle is required. It is important to note that the Power Board Visualizer is compatible only with PEAK System USB CAN-FD dongles. Additionally, an RS232 DB9 straight-through cable is could be used to connect the power board to the PEAK dongle.</p>
<h3>Powering On board through Power Board Visualizer</h3>
<h4>Prerequisites</h4>
<p>Following software must be installed on your pc to control/communicate between Power Board Visualizer and dsPIC33CK.</p>
<ul>
<li>Power Board Visualizer V2</li>
<li>Peak System USB Drivers</li>
</ul>
<h4>Setting up and Connecting the Power Board Visualizer</h4>
<p>After completing the hardware setup, go to the power board visualizer XMLs folder. Open the appropriate project using Power Board Visualizer. Once the project is open, you will see the following screen.</p>
<center><a href="images/psfb-pbv.jpg" target="_blank" rel="nofollow"><img src="images/dashboard_anotated.png" alt="PSFB project running on Power Board Visualizer GUI" width="800" class="inline"/> </a> </center> <center>  Power Board Visualizer GUI  </center> <ol type="1">
<li>Table to monitor the system values in real time</li>
<li>Buttons to start/stop power transfer<ul>
<li>Start Pre Charge - This button starts the precharging of the output capacitors in open loop mode. The capacitors have to be precharged before the Start power Transfer is activated.</li>
<li>Start/Stop Power Transfer - These buttons turn on and off the power transfer by enabling or disabling the primary side switches.</li>
</ul>
</li>
<li>Sliders to provide reference values<ul>
<li>Voltage Output Reference Slider - This slider is used to set reference value for output voltage. Ensure to press the Set button below the slider to communicate the reference value to the microcontroller.</li>
<li>I-CT OCP Slider - This slider sets the input over current protection value.</li>
</ul>
</li>
<li>System State and debug information.<ul>
<li>PSFB Controller State - This section displays the current state of the system. Detailed information about each state and the state machine can be found in the Firmware Overview section.</li>
<li>PSFB Status Flags - This section lists the high-level state of the system and any fault conditions that occur.</li>
</ul>
</li>
<li>Communication status and COM Selector<ul>
<li>The "COM?" button lists all available communication ports for the PBV. If the Peak Dongle drivers are installed and the Peak USB dongle is connected, it will appear as PCAN_USB:FD. Select the appropriate port and click enable. The Power Board Visualizer will then open the selected Comm port.</li>
</ul>
</li>
</ol>
<h4>Sequence of Actions to Power On</h4>
<p>After opening the appropriate Power Board Visualizer project, follow these steps to start the board:</p>
<ol type="1">
<li>Select the correct communication port and enable it.</li>
<li>Verify that everything is set up correctly by checking for status/housekeeping data and ensuring the system is in the PCS_PRECHARGE state.</li>
<li>Click on "Start Precharge". The system will charge the output caps in open loop.</li>
<li>Click on "Start Power Transfer". The system will quickly transition through various states and should eventually reach the PCS_UP_AND_RUNNING state.</li>
<li>Change the reference to desired output voltage value if necessary.</li>
</ol>
<center><a href="images/Precharge.png" target="_blank" rel="nofollow"><img src="images/Precharge.png" alt="PSFB in Pre-Charge state" width="450" class="inline"/> </a> </center> <center>  PSFB in Pre-Charge State  </center> <center><a href="images/Precharged.png" target="_blank" rel="nofollow"><img src="images/Precharged.png" alt="PSFB in Pre-Charge state" width="450" class="inline"/> </a> </center> <center>  PSFB after Precharge completes  </center> <center><a href="images/up_and_running.png" target="_blank" rel="nofollow"><img src="images/up_and_running.png" alt="PSFB in running state" width="450" class="inline"/> </a> </center> <center>  PSFB in running state  </center> <hr  />
<p>&copy; 2025, Microchip Technology Inc. </p>
</div></div><!-- PageDoc -->
<a href="doxygen_crawl.html"></a>
</div><!-- contents -->
</div><!-- doc-content -->
</div><!-- container -->
<!-- HTML footer for doxygen 1.8.20-->
<!-- start footer part -->
<div id="nav-path" class="navpath" style="padding-bottom: 12px; vertical-align: bottom;"><!-- id is needed for treeview function! -->
  <ul>
    <p class="footer" style="text-align: center; font-size: 90%;">
      © Copyright 1998-2022 Microchip Technology Inc. All rights reserved.
    </p>
    </ul>
</div>
</body>
</html>
